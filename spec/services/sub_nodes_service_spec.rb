require 'spec_helper'

describe SubNodesService do

  it '#run' do
    text =  "  ####  \n"\
            "###  #  \n"\
            "# $ .#  \n"\
            "#   .###\n"\
            "### #@.#\n"\
            "  # $$ #\n"\
            "  #  $ #\n"\
            "  #. ###\n"\
            "  ####  "

    level = Level.new(text)
    node  = level.to_node

    sub_nodes = SubNodesService.new(node).run

    sub_nodes[0].to_s.should == "  ####  \n"\
                                "###@ #  \n"\
                                "# $ .#  \n"\
                                "#   .###\n"\
                                "### # .#\n"\
                                "  # $  #\n"\
                                "  #    #\n"\
                                "  #. ###\n"\
                                "  ####  "\

    sub_nodes[1].to_s.should == "  ####  \n"\
                                "###@ #  \n"\
                                "# $ .#  \n"\
                                "#   .###\n"\
                                "### # .#\n"\
                                "  #  $ #\n"\
                                "  #    #\n"\
                                "  #. ###\n"\
                                "  ####  "\

    sub_nodes[2].to_s.should == "  ####  \n"\
                                "###@ #  \n"\
                                "# $ .#  \n"\
                                "#   .###\n"\
                                "### # .#\n"\
                                "  #    #\n"\
                                "  #  $ #\n"\
                                "  #. ###\n"\
                                "  ####  "\

    sub_nodes[3].to_s.should == "  ####  \n"\
                                "###@ #  \n"\
                                "#   .#  \n"\
                                "#   .###\n"\
                                "### # .#\n"\
                                "  # $$ #\n"\
                                "  #    #\n"\
                                "  #. ###\n"\
                                "  ####  "\

    sub_nodes[4].to_s.should == "  ####  \n"\
                                "###  #  \n"\
                                "#   .#  \n"\
                                "#   .###\n"\
                                "### #@.#\n"\
                                "  # $  #\n"\
                                "  #  $ #\n"\
                                "  #. ###\n"\
                                "  ####  "\

    sub_nodes[5].to_s.should == "  ####  \n"\
                                "###  #  \n"\
                                "#   .#  \n"\
                                "#   .###\n"\
                                "### #@.#\n"\
                                "  #  $ #\n"\
                                "  #  $ #\n"\
                                "  #. ###\n"\
                                "  ####  "\

    sub_nodes[6].to_s.should == "  ####  \n"\
                                "###@ #  \n"\
                                "# $ .#  \n"\
                                "#   .###\n"\
                                "### # .#\n"\
                                "  # $$ #\n"\
                                "  #    #\n"\
                                "  #. ###\n"\
                                "  ####  "\

    sub_nodes[7].to_s.should == "  ####  \n"\
                                "###  #  \n"\
                                "# $ .#  \n"\
                                "#   .###\n"\
                                "### #@.#\n"\
                                "  # $  #\n"\
                                "  #  $ #\n"\
                                "  #. ###\n"\
                                "  ####  "\

    sub_nodes[8].to_s.should == "  ####  \n"\
                                "###  #  \n"\
                                "# $ .#  \n"\
                                "#   .###\n"\
                                "### #@.#\n"\
                                "  #  $ #\n"\
                                "  #  $ #\n"\
                                "  #. ###\n"\
                                "  ####  "\

    sub_nodes[9].to_s.should == "  ####  \n"\
                                "###  #  \n"\
                                "#   .#  \n"\
                                "#   .###\n"\
                                "### #@.#\n"\
                                "  # $$ #\n"\
                                "  #  $ #\n"\
                                "  #. ###\n"\
                                "  ####  "\
  end

end


